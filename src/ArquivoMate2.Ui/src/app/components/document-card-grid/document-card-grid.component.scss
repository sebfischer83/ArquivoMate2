/* Theming: verwendet CSS Custom Properties, damit Dark/Light via Host Theme (z.B. body[data-theme='dark']) angepasst werden kann. */
:host { /* Fallbacks falls Theme Vars fehlen */
  --am-bg-surface: var(--tui-base-01, #ffffff);
  --am-bg-elevated: var(--tui-base-02, #f5f5f5);
  --am-border: var(--tui-base-03, #d9d9d9);
  --am-border-strong: var(--tui-base-04, #b5b5b5);
  --am-text-primary: var(--tui-text-01, #1f1f1f);
  --am-text-secondary: var(--tui-text-02, #666666);
  --am-text-invert: var(--tui-text-invert, #ffffff);
  --am-accent: var(--tui-accent, #3b82f6);
  --am-overlay: var(--tui-overlay, rgba(0,0,0,0.45));
  --am-skeleton-base: var(--tui-base-03, #e0e0e0);
  --am-skeleton-highlight: var(--tui-base-02, #f3f3f3);
  --am-danger: var(--tui-error-fill, #b00020);
}

:host-context([data-theme='dark']) {
  --am-bg-surface: var(--tui-base-02, #1f1f1f);
  --am-bg-elevated: var(--tui-base-03, #2a2a2a);
  --am-border: var(--tui-base-04, #3a3a3a);
  --am-border-strong: var(--tui-base-05, #555555);
  --am-text-primary: var(--tui-text-01, #f5f5f5);
  --am-text-secondary: var(--tui-text-02, #b0b0b0);
  --am-overlay: rgba(0,0,0,0.6);
  --am-skeleton-base: #3a3a3a;
  --am-skeleton-highlight: #505050;
}

.document-card-grid-wrapper { position:relative; display:flex; flex-direction:column; gap: .75rem; color:var(--am-text-primary); }
.document-card-grid-wrapper.is-loading { pointer-events:none; }
.loading-overlay { position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.75rem; background:linear-gradient(135deg, var(--am-bg-surface, #fff) 85%, var(--am-bg-elevated, #f5f5f5)); backdrop-filter:blur(2px); z-index:2; animation:fadeIn .25s ease; }
.loading-text { font-size:.85rem; color:var(--am-text-secondary); }
.spinner { width:38px; height:38px; border-radius:50%; border:4px solid var(--am-border); border-top-color: var(--am-accent); animation:spin 0.8s linear infinite; }

.header-row { display:flex; align-items:center; gap:.75rem; }
.header-row .spacer { flex:1; }
.icon-btn { width:34px; height:34px; display:inline-flex; align-items:center; justify-content:center; border:1px solid var(--am-border); background:var(--am-bg-surface); color:var(--am-text-primary); border-radius:6px; cursor:pointer; font-size:16px; line-height:1; transition:background .15s, border-color .15s, color .15s; }
.icon-btn:hover:not(:disabled) { background:var(--am-bg-elevated); border-color:var(--am-border-strong); }
.icon-btn:active:not(:disabled) { background:var(--am-border); }
.icon-btn:disabled { opacity:.5; cursor:default; }
.icon-btn.active { background:var(--am-bg-elevated); border-color:var(--am-border-strong); box-shadow:0 0 0 1px var(--am-border-strong) inset; }
.view-switch { display:inline-flex; gap:.4rem; margin-right:.4rem; }

/* List view */
.list-view { display:flex; flex-direction:column; border:1px solid var(--am-border); border-radius:8px; overflow:hidden; background:var(--tui-background-neutral-1, var(--am-bg-surface)); }
.list-head, .list-row { display:grid; grid-template-columns: 72px 1.1fr 1.6fr .6fr .5fr .7fr; gap:.4rem; align-items:center; padding:.45rem .6rem; font-size:.62rem; }
.list-head { background:var(--tui-background-neutral-1, var(--am-bg-elevated)); font-weight:600; color:var(--tui-text-primary, var(--am-text-primary)); text-transform:uppercase; letter-spacing:.5px; font-size:.55rem; }
.list-row { border-top:1px solid var(--am-border); cursor:pointer; transition:background .12s, color .12s; background:var(--tui-background-neutral-1, transparent); color:var(--tui-text-primary, var(--am-text-primary)); }
.list-row:first-of-type { border-top:none; }
.list-row:hover { background:var(--tui-background-neutral-2, var(--am-bg-elevated)); }
.list-row:focus-visible { outline:2px solid var(--am-accent); outline-offset:-2px; }
.list-row:active { background:var(--tui-background-neutral-3, var(--am-border)); }
.list-row img { width:56px; height:56px; object-fit:cover; border-radius:6px; display:block; }
.thumb-ph { display:inline-flex; width:56px; height:56px; align-items:center; justify-content:center; background:var(--am-bg-elevated); color:var(--am-text-secondary); font-size:.7rem; border-radius:6px; }
.col-summary { overflow:hidden; white-space:nowrap; text-overflow:ellipsis; }
.col-status { display:flex; align-items:center; gap:.35rem; font-size:.7rem; }
.col-status .ok { color: var(--tui-success-fill, #2e7d32); }
.col-status .lock { color: var(--am-text-secondary); }
/* Sender line below title */
.col-title { display:flex; flex-direction:column; gap:2px; }
.col-title .title-line { font-weight:600; line-height:1.15; font-size:.7rem; }
.col-title .sender-line { font-size:.62rem; line-height:1.15; color:var(--tui-text-01, var(--am-text-primary)); font-weight:500; max-width:100%; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

/* List skeleton states */
.list-view-skeleton { pointer-events:none; }
.list-view-skeleton .list-row.skeleton { cursor:default; }
.list-row.skeleton:hover { background:transparent; }
.list-row.skeleton:active { background:transparent; }
.list-row.skeleton .col { display:flex; align-items:center; }
.sk-thumb { width:56px; height:56px; border-radius:6px; background:var(--am-skeleton-base); }
.sk-line { height:8px; border-radius:4px; background:var(--am-skeleton-base); }
.sk-w1 { width:70%; }
.sk-w2 { width:85%; }
.sk-w3 { width:50%; }
.sk-w4 { width:60%; }
.sk-ic { width:14px; height:14px; border-radius:4px; background:var(--am-skeleton-base); }

@media (max-width: 900px) {
  .list-head, .list-row { grid-template-columns: 56px 1.2fr 1.4fr .7fr .8fr; }
  .list-head .col-date, .list-row .col-date { display:none; }
}
@media (max-width: 640px) {
  .list-head, .list-row { grid-template-columns: 48px 1fr 1.2fr .7fr; }
  .list-head .col-type, .list-row .col-type { display:none; }
  .col-summary { display:none; }
}

.grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(var(--am-card-min-width, 300px), 1fr)); gap: .6rem; }
.skeletons { display:grid; grid-template-columns: repeat(auto-fill, minmax(var(--am-card-min-width, 300px), 1fr)); gap:.6rem; }
.skeleton .thumb { position:relative; }
.skeleton .line { height:8px; background:var(--am-skeleton-base); border-radius:4px; }
.skeleton .w1 { width:80%; }
.skeleton .w2 { width:60%; }
.skeleton .w3 { width:40%; }

.shimmer { background:linear-gradient(110deg,var(--am-skeleton-base) 8%,var(--am-skeleton-highlight) 18%,var(--am-skeleton-base) 33%); background-size:200% 100%; animation:shimmer 1.2s ease-in-out infinite; }
.error { color:var(--am-danger); }
.empty { font-size:.85rem; color:var(--am-text-secondary); text-align:center; padding:1rem 0; }

@keyframes shimmer { 0% { background-position:200% 0; } 100% { background-position:-200% 0; } }
@keyframes spin { to { transform:rotate(360deg); } }
@keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
